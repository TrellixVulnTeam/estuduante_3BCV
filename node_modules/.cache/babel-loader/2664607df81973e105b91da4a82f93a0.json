{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/yarlo/Documentos/GitHub/estuduante/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./App.scss\";\nimport { Switch, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { auth, currentUserProfile } from \"./firebase/firebase.utilis\";\nimport Spinner from \"./components/spinner/spinner.component\";\nimport PrivateRoute from \"./components/private-route/private.route.component\";\nimport { SetCurrentUser } from \"./redux/user/user.action\";\n\nconst App = ({\n  setUser\n}) => {\n  _s();\n\n  const [userStatus, setUserStatus] = useState(undefined);\n  useEffect(() => {\n    auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const docRef = await currentUserProfile(userAuth);\n        docRef.onSnapshot(snapshot => {\n          console.log(snapshot.data());\n          setUserStatus(snapshot.data());\n          setUser({\n            id: snapshot.id,\n            ...snapshot.data()\n          });\n        });\n      } else {\n        setUserStatus(userAuth);\n      }\n    });\n  }, []);\n\n  if (userStatus === undefined) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 12\n    }, this);\n  } else if (userStatus === null) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/signin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 12\n    }, this);\n  } else if (userStatus) {\n    console.log(userStatus);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: /*#__PURE__*/_jsxDEV(PrivateRoute, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(App, \"lx3ONN+nODVo8bIjwL699YlkgwE=\");\n\n_c = App;\n\nconst mapDispatchToProps = dispatch => ({\n  setUser: user => dispatch(SetCurrentUser(user))\n});\n\nexport default connect(null, mapDispatchToProps)(App);\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/yarlo/Documentos/GitHub/estuduante/src/App.js"],"names":["React","useEffect","useState","Switch","Redirect","connect","auth","currentUserProfile","Spinner","PrivateRoute","SetCurrentUser","App","setUser","userStatus","setUserStatus","undefined","onAuthStateChanged","userAuth","docRef","onSnapshot","snapshot","console","log","data","id","mapDispatchToProps","dispatch","user"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,YAAP;AAEA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,kBAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,SAASC,IAAT,EAAeC,kBAAf,QAAyC,4BAAzC;AACA,OAAOC,OAAP,MAAoB,wCAApB;AACA,OAAOC,YAAP,MAAyB,oDAAzB;AACA,SAASC,cAAT,QAA+B,0BAA/B;;AAEA,MAAMC,GAAG,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAAA;;AAC3B,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BZ,QAAQ,CAACa,SAAD,CAA5C;AACAd,EAAAA,SAAS,CAAC,MAAM;AACdK,IAAAA,IAAI,CAACU,kBAAL,CAAwB,MAAOC,QAAP,IAAoB;AAC1C,UAAIA,QAAJ,EAAc;AACZ,cAAMC,MAAM,GAAG,MAAMX,kBAAkB,CAACU,QAAD,CAAvC;AAEAC,QAAAA,MAAM,CAACC,UAAP,CAAmBC,QAAD,IAAc;AAC9BC,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,EAAZ;AACAT,UAAAA,aAAa,CAACM,QAAQ,CAACG,IAAT,EAAD,CAAb;AAEAX,UAAAA,OAAO,CAAC;AAAEY,YAAAA,EAAE,EAAEJ,QAAQ,CAACI,EAAf;AAAmB,eAAGJ,QAAQ,CAACG,IAAT;AAAtB,WAAD,CAAP;AACD,SALD;AAMD,OATD,MASO;AACLT,QAAAA,aAAa,CAACG,QAAD,CAAb;AAED;AACF,KAdD;AAeD,GAhBQ,EAgBN,EAhBM,CAAT;;AAkBA,MAAIJ,UAAU,KAAKE,SAAnB,EAA8B;AAC5B,wBAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,YAAP;AACD,GAFD,MAEO,IAAIF,UAAU,KAAK,IAAnB,EAAyB;AAC9B,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACD,GAFM,MAEA,IAAIA,UAAJ,EAAgB;AACrBQ,IAAAA,OAAO,CAACC,GAAR,CAAYT,UAAZ;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,6BACE,QAAC,MAAD;AAAA,+BACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAOD;AACF,CAlCD;;GAAMF,G;;KAAAA,G;;AAoCN,MAAMc,kBAAkB,GAAIC,QAAD,KAAe;AACxCd,EAAAA,OAAO,EAAGe,IAAD,IAAUD,QAAQ,CAAChB,cAAc,CAACiB,IAAD,CAAf;AADa,CAAf,CAA3B;;AAIA,eAAetB,OAAO,CAAC,IAAD,EAAOoB,kBAAP,CAAP,CAAkCd,GAAlC,CAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./App.scss\";\n\nimport { Switch, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { auth, currentUserProfile } from \"./firebase/firebase.utilis\";\nimport Spinner from \"./components/spinner/spinner.component\";\nimport PrivateRoute from \"./components/private-route/private.route.component\";\nimport { SetCurrentUser } from \"./redux/user/user.action\";\n\nconst App = ({ setUser }) => {\n  const [userStatus, setUserStatus] = useState(undefined);\n  useEffect(() => {\n    auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const docRef = await currentUserProfile(userAuth);\n\n        docRef.onSnapshot((snapshot) => {\n          console.log(snapshot.data());\n          setUserStatus(snapshot.data());\n\n          setUser({ id: snapshot.id, ...snapshot.data() });\n        });\n      } else {\n        setUserStatus(userAuth);\n\n      }\n    });\n  }, []);\n\n  if (userStatus === undefined) {\n    return <Spinner />;\n  } else if (userStatus === null) {\n    return <Redirect to=\"/signin\" />;\n  } else if (userStatus) {\n    console.log(userStatus)\n    return (\n      <div className=\"App\">\n        <Switch>\n          <PrivateRoute />\n        </Switch>\n      </div>\n    );\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  setUser: (user) => dispatch(SetCurrentUser(user)),\n});\n\nexport default connect(null, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}