{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import\"./App.scss\";import{Switch,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{auth,currentUserProfile}from\"./firebase/firebase.utilis\";import Spinner from\"./components/spinner/spinner.component\";import PrivateRoute from\"./components/private-route/private.route.component\";import{SetCurrentUser}from\"./redux/user/user.action\";var App=function App(_ref){var setUser=_ref.setUser;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),userStatus=_useState2[0],setUserStatus=_useState2[1];useEffect(function(){auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var docRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=7;break;}_context.next=3;return currentUserProfile(userAuth);case 3:docRef=_context.sent;docRef.onSnapshot(function(snapshot){console.log(snapshot.data());setUserStatus(snapshot.data());setUser(_objectSpread({id:snapshot.id},snapshot.data()));});_context.next=8;break;case 7:setUserStatus(userAuth);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());},[]);if(userStatus===undefined){return/*#__PURE__*/_jsx(Spinner,{});}else if(userStatus===null){return/*#__PURE__*/_jsx(Redirect,{to:\"/signin\"});}else if(userStatus){console.log(userStatus);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Switch,{children:/*#__PURE__*/_jsx(PrivateRoute,{})})});}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setUser:function setUser(user){return dispatch(SetCurrentUser(user));}};};export default connect(null,mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/yarlo/Documentos/APP/quiz-final/src/App.js"],"names":["React","useEffect","useState","Switch","Redirect","connect","auth","currentUserProfile","Spinner","PrivateRoute","SetCurrentUser","App","setUser","undefined","userStatus","setUserStatus","onAuthStateChanged","userAuth","docRef","onSnapshot","snapshot","console","log","data","id","mapDispatchToProps","dispatch","user"],"mappings":"upBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,YAAP,CAEA,OAASC,MAAT,CAAiBC,QAAjB,KAAiC,kBAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,OAASC,IAAT,CAAeC,kBAAf,KAAyC,4BAAzC,CACA,MAAOC,CAAAA,OAAP,KAAoB,wCAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,oDAAzB,CACA,OAASC,cAAT,KAA+B,0BAA/B,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eACSV,QAAQ,CAACW,SAAD,CADjB,wCACpBC,UADoB,eACRC,aADQ,eAE3Bd,SAAS,CAAC,UAAM,CACdK,IAAI,CAACU,kBAAL,2FAAwB,iBAAOC,QAAP,iIAClBA,QADkB,+CAECV,CAAAA,kBAAkB,CAACU,QAAD,CAFnB,QAEdC,MAFc,eAIpBA,MAAM,CAACC,UAAP,CAAkB,SAACC,QAAD,CAAc,CAC9BC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,EAAZ,EACAR,aAAa,CAACK,QAAQ,CAACG,IAAT,EAAD,CAAb,CAEAX,OAAO,gBAAGY,EAAE,CAAEJ,QAAQ,CAACI,EAAhB,EAAuBJ,QAAQ,CAACG,IAAT,EAAvB,EAAP,CACD,CALD,EAJoB,6BAWpBR,aAAa,CAACE,QAAD,CAAb,CAXoB,sDAAxB,iEAeD,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,GAAIH,UAAU,GAAKD,SAAnB,CAA8B,CAC5B,mBAAO,KAAC,OAAD,IAAP,CACD,CAFD,IAEO,IAAIC,UAAU,GAAK,IAAnB,CAAyB,CAC9B,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,SAAb,EAAP,CACD,CAFM,IAEA,IAAIA,UAAJ,CAAgB,CACrBO,OAAO,CAACC,GAAR,CAAYR,UAAZ,EACA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,KAAC,MAAD,wBACE,KAAC,YAAD,IADF,EADF,EADF,CAOD,CACF,CAlCD,CAoCA,GAAMW,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,QAAe,CACxCd,OAAO,CAAE,iBAACe,IAAD,QAAUD,CAAAA,QAAQ,CAAChB,cAAc,CAACiB,IAAD,CAAf,CAAlB,EAD+B,CAAf,EAA3B,CAIA,cAAetB,CAAAA,OAAO,CAAC,IAAD,CAAOoB,kBAAP,CAAP,CAAkCd,GAAlC,CAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./App.scss\";\n\nimport { Switch, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { auth, currentUserProfile } from \"./firebase/firebase.utilis\";\nimport Spinner from \"./components/spinner/spinner.component\";\nimport PrivateRoute from \"./components/private-route/private.route.component\";\nimport { SetCurrentUser } from \"./redux/user/user.action\";\n\nconst App = ({ setUser }) => {\n  const [userStatus, setUserStatus] = useState(undefined);\n  useEffect(() => {\n    auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const docRef = await currentUserProfile(userAuth);\n\n        docRef.onSnapshot((snapshot) => {\n          console.log(snapshot.data());\n          setUserStatus(snapshot.data());\n\n          setUser({ id: snapshot.id, ...snapshot.data() });\n        });\n      } else {\n        setUserStatus(userAuth);\n\n      }\n    });\n  }, []);\n\n  if (userStatus === undefined) {\n    return <Spinner />;\n  } else if (userStatus === null) {\n    return <Redirect to=\"/signin\" />;\n  } else if (userStatus) {\n    console.log(userStatus)\n    return (\n      <div className=\"App\">\n        <Switch>\n          <PrivateRoute />\n        </Switch>\n      </div>\n    );\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  setUser: (user) => dispatch(SetCurrentUser(user)),\n});\n\nexport default connect(null, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}