{"ast":null,"code":"import _defineProperty from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/yarlo/Documentos/APP/quiz-final/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import firebase from\"firebase/app\";import\"firebase/auth\";import\"firebase/firestore\";import\"firebase/firebase-functions\";var firebaseConfig={apiKey:\"AIzaSyD3q3ZnM6qejCc4NOoXjQ2xsVfVn24WdJc\",authDomain:\"quiz-54a90.firebaseapp.com\",projectId:\"quiz-54a90\",storageBucket:\"quiz-54a90.appspot.com\",messagingSenderId:\"915241107805\",appId:\"1:915241107805:web:91ca6d11bb535d313828b4\",measurementId:\"G-4HHYPEW7DM\"};if(!firebase.apps.length){firebase.initializeApp(firebaseConfig);}export var currentUserProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth,additionalData){var userRef,sanpshot,displayName,email,CreatedAt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userAuth){_context.next=2;break;}return _context.abrupt(\"return\");case 2:userRef=firestore.doc(\"users/\".concat(userAuth.uid));_context.next=5;return userRef.get();case 5:sanpshot=_context.sent;if(sanpshot.exists){_context.next=11;break;}displayName=userAuth.displayName,email=userAuth.email;CreatedAt=new Date();_context.next=11;return userRef.set(_objectSpread({displayName:displayName,email:email,average:0,CreatedAt:CreatedAt,result:[],isExamHasGiven:false},additionalData));case 11:return _context.abrupt(\"return\",userRef);case 12:case\"end\":return _context.stop();}}},_callee);}));return function currentUserProfile(_x,_x2){return _ref.apply(this,arguments);};}();export var getQuestion=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(path){var docRef,snapShot;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:docRef=firestore.doc(\"questions/\".concat(path));_context2.next=3;return docRef.get();case 3:snapShot=_context2.sent;_context2.next=6;return snapShot.data();case 6:return _context2.abrupt(\"return\",_context2.sent);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getQuestion(_x3){return _ref2.apply(this,arguments);};}();export var createResult=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(uid,obj,examName){var correctPoints,numberOfCorrectAnswers,numberOfIncorrectAnswers,numberOfQuestions,docRef,createdAt;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log({uid:uid,obj:obj});correctPoints=obj.correctPoints,numberOfCorrectAnswers=obj.numberOfCorrectAnswers,numberOfIncorrectAnswers=obj.numberOfIncorrectAnswers,numberOfQuestions=obj.numberOfQuestions;docRef=firestore.doc(\"users/\".concat(uid));createdAt=Date.now();_context3.next=6;return docRef.update({result:firebase.firestore.FieldValue.arrayUnion({correctPoints:correctPoints,numberOfCorrectAnswers:numberOfCorrectAnswers,numberOfIncorrectAnswers:numberOfIncorrectAnswers,numberOfQuestions:numberOfQuestions,createdAt:createdAt,examName:examName})});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function createResult(_x4,_x5,_x6){return _ref3.apply(this,arguments);};}();export var getResult=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(uid){var docRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return firestore.doc(\"users/\".concat(uid));case 2:docRef=_context4.sent;return _context4.abrupt(\"return\",docRef);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function getResult(_x7){return _ref4.apply(this,arguments);};}();export var updateGroupResult=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(groupID,userId,firstName,average,oldObj){var docRef,res,resultArr;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(groupID);docRef=firestore.doc(\"result/l1aU30VzftlGgYP4Y91W\");_context6.next=4;return docRef.get();case 4:res=_context6.sent;resultArr=res.data()[groupID];console.log(res.data());if(resultArr)resultArr.forEach(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(el){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(el);if(!(el.id===userId)){_context5.next=8;break;}_context5.next=4;return docRef.update(_defineProperty({},groupID,firebase.firestore.FieldValue.arrayRemove(_objectSpread({},oldObj))));case 4:_context5.next=6;return docRef.update(_defineProperty({},groupID,firebase.firestore.FieldValue.arrayUnion({id:userId,firstName:firstName,average:average})));case 6:_context5.next=11;break;case 8:console.log('i am get logged');_context5.next=11;return docRef.update(_defineProperty({},groupID,firebase.firestore.FieldValue.arrayUnion({id:userId,firstName:firstName,average:average})));case 11:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x13){return _ref6.apply(this,arguments);};}());case 8:case\"end\":return _context6.stop();}}},_callee6);}));return function updateGroupResult(_x8,_x9,_x10,_x11,_x12){return _ref5.apply(this,arguments);};}();export var updateAverage=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(path,average){var docRef;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:docRef=firestore.doc(\"users/\".concat(path));_context7.next=3;return docRef.update({average:average});case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function updateAverage(_x14,_x15){return _ref7.apply(this,arguments);};}();//firebase.functions.Functions.\nexport var firestore=firebase.firestore();export var auth=firebase.auth();","map":{"version":3,"sources":["/home/yarlo/Documentos/APP/quiz-final/src/firebase/firebase.utilis.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","currentUserProfile","userAuth","additionalData","userRef","firestore","doc","uid","get","sanpshot","exists","displayName","email","CreatedAt","Date","set","average","result","isExamHasGiven","getQuestion","path","docRef","snapShot","data","createResult","obj","examName","console","log","correctPoints","numberOfCorrectAnswers","numberOfIncorrectAnswers","numberOfQuestions","createdAt","now","update","FieldValue","arrayUnion","getResult","updateGroupResult","groupID","userId","firstName","oldObj","res","resultArr","forEach","el","id","arrayRemove","updateAverage","auth"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/firebase-functions\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD3q3ZnM6qejCc4NOoXjQ2xsVfVn24WdJc\",\n  authDomain: \"quiz-54a90.firebaseapp.com\",\n  projectId: \"quiz-54a90\",\n  storageBucket: \"quiz-54a90.appspot.com\",\n  messagingSenderId: \"915241107805\",\n  appId: \"1:915241107805:web:91ca6d11bb535d313828b4\",\n  measurementId: \"G-4HHYPEW7DM\",\n};\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\n\nexport const currentUserProfile = async (userAuth, additionalData) => {\n  if (!userAuth) return;\n\n  const userRef = firestore.doc(`users/${userAuth.uid}`);\n  const sanpshot = await userRef.get();\n\n  if (!sanpshot.exists) {\n    const { displayName, email } = userAuth;\n    const CreatedAt = new Date();\n\n    await userRef.set({\n      displayName,\n      email,\n      average: 0,\n      CreatedAt,\n      result: [],\n      isExamHasGiven: false,\n      ...additionalData,\n    });\n  }\n\n  return userRef;\n};\n\n\n\nexport const getQuestion = async (path) => {\n  const docRef = firestore.doc(`questions/${path}`);\n  const snapShot = await docRef.get();\n  return await snapShot.data();\n};\n\nexport const createResult = async (uid, obj, examName) => {\n  console.log({ uid, obj });\n  const {\n    correctPoints,\n    numberOfCorrectAnswers,\n    numberOfIncorrectAnswers,\n    numberOfQuestions,\n  } = obj;\n  let docRef = firestore.doc(`users/${uid}`);\n  const createdAt = Date.now();\n\n  await docRef.update({\n    result: firebase.firestore.FieldValue.arrayUnion({\n      correctPoints,\n      numberOfCorrectAnswers,\n      numberOfIncorrectAnswers,\n      numberOfQuestions,\n      createdAt,\n      examName,\n    }),\n  });\n};\n\nexport const getResult = async (uid) => {\n  const docRef = await firestore.doc(`users/${uid}`);\n  return docRef;\n  //const result = await docRef.get().data();\n\n  //return result;\n  //console.log(result);\n};\n\nexport const updateGroupResult = async (\n  groupID,\n  userId,\n  firstName,\n  average,\n  oldObj\n) => {\n  console.log(groupID)\n  const docRef = firestore.doc(\"result/l1aU30VzftlGgYP4Y91W\");\n  const res =  await docRef.get();\n  const resultArr = res.data()[groupID]\n  console.log(res.data())\n\n\n  if(resultArr)\n\n  resultArr.forEach( async el => {\n    console.log(el)\n    if (el.id === userId) {\n\n      //docRef.set({ [groupID]: [{ userId, firstName, average }] });\n       await docRef.update({\n        [groupID]: firebase.firestore.FieldValue.arrayRemove({ ...oldObj }),\n      });\n\n       await docRef.update({\n        [groupID]: firebase.firestore.FieldValue.arrayUnion({\n          id: userId,\n          firstName,\n          average,\n        }),\n      });\n    } else {\n      console.log('i am get logged')\n       await docRef.update({\n        [groupID]: firebase.firestore.FieldValue.arrayUnion({\n          id: userId,\n          firstName,\n          average,\n        }),\n      });\n    }\n  });\n\n\n\n\n};\n\nexport const updateAverage = async (path, average) => {\n  const docRef = firestore.doc(`users/${path}`);\n\n  await docRef.update({\n    average: average,\n  });\n};\n//firebase.functions.Functions.\n\n\nexport const firestore = firebase.firestore();\nexport const auth = firebase.auth();\n\n\n"]},"metadata":{},"sourceType":"module"}